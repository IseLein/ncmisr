---
const today = new Date();
---

<footer>
	<div class="newsletter-section">
		<h2>Subscribe.</h2>
		<p class="newsletter-description">Want to have the newsletter delivered to your inbox?</p>
		<form class="newsletter-form" method="post" id="newsletter-form">
			<input 
				type="email" 
				id="newsletter-email" 
				name="email" 
				placeholder="Email Address"
				aria-label="Email address for newsletter"
			/>
			<button type="submit" class="subscribe-btn">Sign Up</button>
		</form>
		<div id="success-alert" class="success-alert hidden">
			<div class="alert-content">
				<span class="alert-icon">âœ“</span>
				<span class="alert-text">Successfully subscribed!</span>
			</div>
		</div>
	</div>
	
	<div class="contact-section">
		Contact us: info[at]ncmisr.com
	</div>

	<div class="copyright">
		&copy; {today.getFullYear()} NCMISR. All rights reserved.
	</div>
</footer>

<style>
	footer {
		padding: 3em 1em 2em 1em;
		text-align: center;
		max-width: 600px;
		margin: 0 auto;
	}

	.newsletter-section {
		margin-bottom: 2rem;
	}

	.newsletter-section h2 {
		font-weight: 600;
		color: var(--fg);
	}

	.newsletter-description {
		font-size: 1.2rem;
		margin: 0;
		padding-bottom: 1rem;
		line-height: 1.6;
		color: var(--fg);
	}

	.newsletter-form {
		display: flex;
		flex-direction: column;
		gap: 1rem;
		max-width: 400px;
		margin: 0 auto;
	}

	.newsletter-form input[type="email"] {
		padding: 1rem;
		border: 1px solid var(--fg);
		font-family: 'Crimson Text', serif;
		font-size: 1.2rem;
		background: white;
		color: var(--fg);
	}

	.newsletter-form input[type="email"]:focus {
		outline: none;
		border-color: var(--accent);
	}

	.newsletter-form input[type="email"]::placeholder {
		color: rgba(var(--gray), 0.7);
	}

	.subscribe-btn {
		background: var(--fg);
		color: var(--bg);
		border: none;
		padding: 1rem;
		font-family: 'Crimson Text', serif;
		font-size: 1.2rem;
		cursor: pointer;
		transition: all 0.3s ease;
	}

	.subscribe-btn:hover {
		background: var(--accent);
	}

	.contact-section {
		font-size: 1.2rem;
		margin: 0;
		padding-bottom: 0.5rem;
	}

	.copyright {
		font-size: 1.2rem;
		color: rgba(var(--fg), 0.6);
		margin: 0;
	}

	.success-alert {
		margin-top: 1rem;
		padding: 1rem;
		background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
		border: 1px solid #4caf50;
		width: 100%;
		max-width: 400px;
		margin-left: auto;
		margin-right: auto;
		transition: all 0.3s ease;
		box-shadow: 0 2px 8px rgba(76, 175, 80, 0.2);
		box-sizing: border-box;
	}

	.success-alert.hidden {
		display: none;
	}

	.alert-content {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 0.5rem;
		color: #2e7d32;
		font-family: 'Crimson Text', serif;
		font-size: 1.2rem;
		font-weight: 600;
	}

	.alert-icon {
		font-size: 1.2rem;
		font-weight: bold;
	}

	@media (min-width: 768px) {
		footer {
			padding: 2em 1em;
		}

		.newsletter-description {
			font-size: 1.4rem;
		}

		.contact-section {
			font-size: 1.3rem;
		}

		.copyright {
			font-size: 1.3rem;
		}

		.alert-content {
			font-size: 1.3rem;
		}
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', function() {
		const form = document.getElementById('newsletter-form');
		const emailInput = document.getElementById('newsletter-email') as HTMLInputElement;
		const successAlert = document.getElementById('success-alert');

		if (!form || !emailInput || !successAlert) {
			return;
		}

		form.addEventListener('submit', function(e) {
			e.preventDefault();
			
			const email = emailInput.value.trim();
			if (!email) {
				return;
			}

			// TODO Do the actual addition to the newsletter list

			successAlert.classList.remove('hidden');
			
			emailInput.value = '';

			setTimeout(() => {
				successAlert.classList.add('hidden');
			}, 3000);
		});
	});
</script>
